# 1. 프로젝트 생성
## ① 프로젝트 생성
![1](https://user-images.githubusercontent.com/48504392/71709308-a1282e00-2e39-11ea-80e9-d9d2a79bc818.png)
## ② 장고 설치
> $ pip install django
## ③ 장고 프로젝트 생성
> $ django-admin startproject config .

# 2. 웹 서버 시작
## ① 웹 서버 시작
> $ python manage.py runserver
![2](https://user-images.githubusercontent.com/48504392/71709427-565ae600-2e3a-11ea-99e9-a29771c5412e.png)
## ② 설문조사 앱 생성
> $ python manage.py startapp polls
## ③ 첫 번째 뷰 생성
> polls/views.py 입력
~~~python
from django.http import HttpResponse

def index(request):
    return HttpResponse("Hello, world. You're at the polls index.")
~~~
> polls/urls.py 새로 생성 및 입력
~~~python
from django.urls import path
from . import views

urlpatterns = [
    path('', views.index, name='index'),
]
~~~
>> path 함수는 path(route, view, kwargs, name) 형태로 호출되며 4개의 인수를 받는 것이 가능  
>> - route : 주소를 의미  
>> - view : route의 주소로 접근했을 때 호출할 뷰  
>> - kwargs : 뷰에 전달할 값  
>> - name : route의 명칭  

> config/urls.py 수정
~~~python
from django.contrib import admin
from django.urls import path, include

urlpatterns = [
    path('polls/',include('polls.urls')),
    path('admin/', admin.site.urls),
]
~~~
>> include : 다른 urls.py 파일을 참조할 수 있도록 하는 역할  
>> [예시] 127.0.0.1:8000/polls/list/ 주소로 접속 시 polls/까지는 일치하므로 나머지 list/ 부분만 polls/urls.py에서 탐색하는 방식으로 동작  
## ④ 데이터베이스 생성
> - 데이터베이스의 생성 및 초기화  
>> ![3](https://user-images.githubusercontent.com/48504392/71710551-27e00980-2e40-11ea-870a-43fb8fce38b3.png)  
>> - migrate 구문은 보통 데이터베이스 관련 설정이 종료된 후 실행  
> - config/settings.py의 line 76의 [ENGINE] 부분을 수정하여 데이터베이스의 종류 설정이 가능  
>> ![4](https://user-images.githubusercontent.com/48504392/71710765-30850f80-2e41-11ea-87dd-cf2f4cca2415.png)  
>> ① sqlite3    → 'django.db.backends.sqlite3'  
>> ② postgresql → 'django.db.backends.postgresql'  
>> ③ mysql      → 'django.db.backends.mysql'  
>> ④ oracle     → 'django.db.backends.oracle'  
## ⑤ 모델 생성
> polls/models.py 내용 입력  
~~~python
from django.db import models

class Question(models.Model):
    question_text = models.CharField(max_length=200)
    pub_date = models.DateTimeField('date published')

class Choice(models.Model):
    question = models.ForeignKey(Question, on_delete=models.CASCADE)
    choice_text = models.CharField(max_length=200)
    votes = models.IntegerField(default=0)
~~~
>> models.Model : Question 클래스와 Choice 클래스에게 상속하는 부모 클래스, 실제로 DB와 ORM을 이용해 동작하는 기능을 보유  
>> ForeignKey : 다른 모델과의 관계를 만들기 위해 사용
>> [예시] Choice 모델은 ForeignKey로 Question 모델을 가지므로 Question 모델에 소속된다는 것을 의미  

> config/settings.py의 [INSTALLED_APPS] 구문에 polls 앱 추가  
![5](https://user-images.githubusercontent.com/48504392/71711192-3bd93a80-2e43-11ea-90f6-55f42e3d5dab.png)  
>> polls.apps.PollsConfig : polls/apps.py 파일 내의 PollsConfig 클래스를 의미  

> 데이터베이스에 수정된 모델 내용을 적용  
![6](https://user-images.githubusercontent.com/48504392/71711409-3a5c4200-2e44-11ea-95b4-eed3e1e68609.png)  

> 어떤 SQL 구문이 실행될지 확인  
>> ![7](https://user-images.githubusercontent.com/48504392/71711476-a0e16000-2e44-11ea-8593-7a6da13ffffe.png)  
>> - 해당 구문을 통해 어떤 SQL을 실행할지 또는 문제가 있는 쿼리가 없는지에 대한 판단 가능  
>> - 장고의 경우 쿼리문을 몰라도 ORM을 통해 웹 서비스 구축이 가능  

> 변경사항을 데이터베이스에 반영  
>> ![8](https://user-images.githubusercontent.com/48504392/71711659-52809100-2e45-11ea-882b-8de24c1fa58a.png)  

## ⑥ 모델에 함수 추가
> polls/models.py에서 Question 모델과 Choice 모델에 [__str__] 메서드 추가  
~~~python
from django.db import models

class Question(models.Model):
    question_text = models.CharField(max_length=200)
    pub_date = models.DateTimeField('date published')
    def __str__(self): # 추가
        return self.question_text

class Choice(models.Model):
    question = models.ForeignKey(Question, on_delete=models.CASCADE)
    choice_text = models.CharField(max_length=200)
    votes = models.IntegerField(default=0)
    def __str__(self): # 추가
        return self.choice_text
~~~
>> [__str__] 메서드 : 관리자 화면이나 쉘에서 객체를 출력할 때 나타날 내용을 결정

> polls/models.py에 [was_published_recently] 메서드 추가  
~~~python
import datetime # 추가

from django.db import models
from django.utils import timezone # 추가

class Question(models.Model):
    …
    def was_published_recently(self): # 추가
        return self.pub_date >= timezone.now() - datetime.timedelta(days=1)
~~~
>> 모델을 작성한 후 단순 메서드 변경은 migrate 필요 X  

## ⑦ 관리자 페이지 확인
> 관리자 계정 생성  
>> ![9](https://user-images.githubusercontent.com/48504392/71712191-78a73080-2e47-11ea-8970-6a333310370d.png)  

> 서버 실행  
>> $ python manage.py runserver  

> http://127.0.0.1:8000/admin/ 접속  
>> ![10](https://user-images.githubusercontent.com/48504392/71712325-1dc20900-2e48-11ea-9104-e1ae311349c4.png)  

> polls/admin.py 내용 입력  
~~~python
from django.contrib import admin
from .models import Question # 추가

admin.site.register(Question) # 추가
~~~
>> 해당 구문을 통해 관리자 페이지에서 Question 모델을 관리  

## ⑧ 여러 뷰 추가
> polls/views.py에 내용 입력  
~~~python
from django.http import HttpResponse

def index(request):
    return HttpResponse("Hello, world. You're at the polls index.")

def detail(request, question_id): # 추가
    return HttpResponse("You're looking at question %s." % question_id)

def results(request, question_id): # 추가
    response = "You're looking at the results of question %s."
    return HttpResponse(response % question_id)

def vote(request, question_id): # 추가
    return HttpResponse("You're voting on question %s." % question_id)
~~~
>> 투표 목록 : 등록된 투표의 목록을 표시하고 상세 페이지로 이동하는 링크 제공  
>> 투표 상세 : 투표의 상세 항목 제공  
>> 투표 기능 : 선택한 답변을 반영  
>> 투표 결과 : 선택한 답변을 반영 후 결과 출력  

> polls/urls.py에 내용 입력  
~~~python
from django.urls import path
from . import views

urlpatterns = [
    path('', views.index, name='index'),
    path('<int:question_id>/', views.detail, name = 'detail'),           # 추가
    path('<int:question_id>/results/', views.results, name = 'results'), # 추가
    path('<int:question_id>/vote/', views.vote, name = 'vote'),          # 추가
]
~~~
> config/urls.py의 include 구문을 통해 참조되는 url  
>> path('', views.index, name='index')                                  → /polls/  
>> path('<int:question_id>/', views.detail, name = 'detail')            → /polls/5/  
>> path('<int:question_id>/results/', views.results, name = 'results')  → /polls/5/results/  
>> path('<int:question_id>/vote/', views.vote, name = 'vote')           → /polls/5/vote/  
## ⑨ 404 오류 발생
## ⑩ 하드코딩된 URL 제거
## ⑪ URL 네임스페이스 설정
## ⑫ 간단한 폼 생성
## ⑬ 제네릭 뷰 사용
## ⑭ 정적 파일 사용
## ⑮ 관리자 폼 커스터마이징
## 관리자 화면 목록 커스터마이징
